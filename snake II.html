<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Snake</title>
</head>
<body style='background-color:white'>
</body>
<script>
	var snakeGame, kaa;
	
	snakeGame = new SnakeGame(450, 300, 25);
	kaa = new Snake([[3,5],[4,5], [5,5]]);
	snakeGame.init(kaa);
	
	function SnakeGame(canvasWidth, canvasHeight, blockSize)
	{
		this.canvas = document.createElement('canvas');
		this.ctx = this.canvas.getContext('2d');
		this.blockSize = blockSize;
		this.canvas.width = canvasWidth;
		this.canvas.height = canvasHeight;
		this.canvas.style.border = '1px solid';
		this.canvas.style.margin = '0 auto';
		this.canvas.style.display = 'block';
		this.canvas.style.marginTop = '50vh';
		this.canvas.style.transform =  'translateY(-50%)';
		document.body.appendChild(this.canvas);
		var instance = this;
		
		this.init = function(snake)
		{
			this.snake = snake;
			snake.draw(this.ctx, this.blockSize);
			refreshCanvas();
		};
		
		var refreshCanvas = function()
		{
			instance.ctx.clearRect(0, 0, instance.canvas.width, instance.canvas.height);
			instance.snake.advance();
			instance.snake.draw(instance.ctx, instance.blockSize);
			setTimeout(refreshCanvas, 200);
		}
	}
	
	function Snake(position)
	{
		this.position = position;
		this.draw = function(ctx, blockSize)
		{
			ctx.save();
			ctx.fillStyle = '#BADA55';
			for(let i = 0; i < this.position.length; i++)
				ctx.fillRect(this.position[i][0] * blockSize, this.position[i][1] * blockSize, blockSize, blockSize);
			ctx.restore();
		};
		
		this.advance = function()
		{
			for(let i = 0; i < this.position.length; i++)
					this.position[i][0] += 1;
		};
	}
</script>
</html>